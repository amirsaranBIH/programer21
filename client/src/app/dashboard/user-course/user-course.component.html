<div class="container">
    <div class="user-course">
        <div class="course-main flex flex--not-even margin-bottom">
            <div class="course-main-info flex flex--not-even flex--column flex--between">
                <div class="info">
                    <h1 class="h2">{{ course.title }}</h1>
                    <hr class="hr--small" [ngStyle]="{ 'background-color': course.color }">
                    <div class="course-info">
                        <span>{{course.courseLectures.length}} {{course.courseLectures.length === 1 ? 'lecture' : 'lectures'}}</span>
                    <span>{{course.totalErt}} {{course.totalErt === 1 ? 'hour' : 'hours'}}</span>
                    <span class="text--capitalize">{{ course.difficulty }}</span>
                    </div>
                    <p>{{ course.description }}</p>
                    <p class="course-supported-languages h3">{{ course.supportedLanguages | formatSupportedLanguages }}</p>
                    <p>Last updated at {{ formatDate(course.updatedAt) }}</p>
                </div>
                <div class="cta">
                    <button *ngIf="course.userCourseStatus === 'learning'" class="button button--large" [routerLink]="['/lecture', course.currentLectureSlug]">Start Next Lecture</button>
                </div>
            </div>
            <div class="course-payment-info">
                <div class="thumbnail">
                    <img [src]="course.image" [alt]="course.slug">
                    <div class="course-percentage flex flex--not-even flex--align-center flex--between">
                        <div class="percentage" [ngStyle]="{'width': course.coursePercentageFinished + '%'}"></div>
                    </div>
                    <div class="course-text-percentage flex flex--not-even">
                        <span class="text--small">{{ course.coursePercentageFinished }}%</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="course-lectures-list">
            <div class="course-lecture" [ngClass]="{ 'lecture-finished' : lecture.finished }" *ngFor="let lecture of course.courseLectures">
                <div class="flex flex--not-even flex--between flex--align-center">
                    <div class="lecture-title flex flex--not-even flex--align-center">
                        <img (click)="lectureShowMore(lecture)" [ngClass]="{ 'rotate-arrow': lecture.showMore }" [src]="'assets/icons/arrow-down' + (lecture.finished ? '-white' : '') + '.svg'" alt="arrow-down">
                        <span>{{ lecture.title }}</span>
                    </div>
                    <button class="button" [disabled]="!lecture.isUnlocked" [routerLink]="['/lecture', lecture.slug]">{{ getLectureButtonText(lecture) }}</button>
                </div>
                <div *ngIf="lecture.showMore" class="course-lecture-more-info">
                    <div class="flex">
                        <div class="more-info-left flex flex--column flex--between flex--not-even">
                            <p>Estimated reading time: {{ lecture.ert }} min</p>
                            <div>
                                <button *ngIf="!lecture.finished || lecture.skipped" class="button" [disabled]="!lecture.skippable || lecture.skipped">{{ getLectureSkipButtonText(lecture) }}</button>
                            </div>
                        </div>
                        <div class="more-info-right">
                            <p>{{ lecture.description }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
