<div class="container">
    <div class="new-course">
        <form class="form" [formGroup]="createCourseForm" #ngForm="ngForm"
        (ngSubmit)="onSubmit()">
            <h2>Create New Course</h2>

            <div class="section section--large">
                <div class="form-group">
                    <div class="flex flex-sm flex--align-center flex--not-even flex--between">
                        <label for="title" class="required">Title</label>
                        <span class="slug">Slug: {{ title.value | titleToSlug }}</span>
                    </div>
                    <div class="input-group"
                        [ngClass]="{ 'is-invalid' : (title.invalid && title.touched) || (title.invalid && ngForm.submitted) }">
                        <input type="text" id="title" formControlName="title"
                            placeholder="Course title">
                        <div class="input-help flex flex--not-even flex--align-center">
                            <div class="input-help-status"></div>
                            <div class="input-help-message">
                                <span>Title is required!</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex">
                    <div class="form-group">
                        <label for="difficulty" class="required">Difficulty</label>
                        <div class="input-group"
                            [ngClass]="{ 'is-invalid' : (difficulty.invalid && difficulty.touched) || (difficulty.invalid && ngForm.submitted) }">
                            <select formControlName="difficulty" id="difficulty">
                                <option value="">Select difficulty</option>
                                <option value="beginner">Beginner</option>
                                <option value="advanced">Advanced</option>
                            </select>
                            <div class="input-help flex flex--not-even flex--align-center">
                                <div class="input-help-status"></div>
                                <div class="input-help-message">
                                    <span>User must have a difficulty!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="price" class="required">Price</label>
                        <div class="input-group"
                            [ngClass]="{ 'is-invalid' : (price.invalid && price.touched) || (price.invalid && ngForm.submitted) }">
                            <input type="number" id="spricehortName" formControlName="price"
                                placeholder="Enter course price">
                            <div class="input-help flex flex--not-even flex--align-center">
                                <div class="input-help-status"></div>
                                <div class="input-help-message">
                                    <span>Price is required!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex">
                    <div class="form-group">
                        <label for="shortName" class="required">Programming Language / Short Name</label>
                        <div class="input-group"
                            [ngClass]="{ 'is-invalid' : (shortName.invalid && shortName.touched) || (shortName.invalid && ngForm.submitted) }">
                            <input type="text" id="shortName" formControlName="shortName"
                                placeholder="Enter course programming language / short name">
                            <div class="input-help flex flex--not-even flex--align-center">
                                <div class="input-help-status"></div>
                                <div class="input-help-message">
                                    <span>Programming language / short name is required!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="color" class="required color-group-label">Color</label>
                        <div class="input-group"
                            [ngClass]="{ 'is-invalid' : (color.invalid && color.touched) || (color.invalid && ngForm.submitted) }">
                            <div class="color-input-group flex flex-sm flex--not-even flex--align-center">
                                <input type="text" id="color" formControlName="color"
                                    placeholder="What you want to be know as on Programer21">
                                <div class="color-picker">
                                    <label class="flex" for="color-picker" [ngStyle]="{ 'background-color': color.value }">
                                        <img src="assets/icons/color-picker.svg" alt="color-picker">
                                        <input type="color" hidden id="color-picker" #colorPicker (change)="colorChanged(colorPicker.value)">
                                    </label>
                                </div>
                            </div>
                            <div class="input-help flex flex--not-even flex--align-center">
                                <div class="input-help-status"></div>
                                <div class="input-help-message">
                                    <span>Color is required!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex flex-sm flex--not-even flex--align-center">
                    <div class="form-group supported-language-group">
                        <label for="supportedLanguage" class="required">Supported Languages</label>
                        <div class="input-group"
                            [ngClass]="{ 'is-invalid' : !supportedLanguage && supportedLanguageSubmitted }">
                            <input type="text" id="supportedLanguage" [ngModelOptions]="{standalone: true}" [(ngModel)]="supportedLanguage"
                                placeholder="Enter supported language to add">
                            <div class="input-help flex flex-sm flex--not-even flex--align-center">
                                <div class="input-help-status"></div>
                                <div class="input-help-message">
                                    <span>Supported language can't be empty!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="add-language-button">
                        <button type="button" class="flex flex-sm" (click)="addSupportedLanguage()">
                            <img src="assets/icons/plus.svg" alt="plus">
                        </button>
                    </div>
                </div>
                <div class="supported-languages-list margin-bottom flex flex-sm flex--wrap flex--not-even flex--align-center">
                    <div class="supported-language flex flex-sm flex--not-even flex--align-center" *ngFor="let language of supportedLanguages">
                        <span class="text--capitalize">{{ language }}</span>
                        <div class="remove-supported-language">
                            <img src="assets/icons/remove-supported-language.svg" alt="remove-supported-language">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="description" class="required">User Description</label>
                    <div class="input-group"
                        [ngClass]="{ 'is-invalid' : (description.invalid && description.touched) || (description.invalid && ngForm.submitted) }">
                        <textarea formControlName="description" id="description" cols="30" rows="5"
                            placeholder="User Description"></textarea>
                        <div class="input-help flex flex--not-even flex--align-center">
                            <div class="input-help-status"></div>
                            <div class="input-help-message">
                                <span *ngIf="description.errors?.required">Description is required!</span>
                                <span *ngIf="description.errors?.maxlength">Description must be contain less than {{ description.errors?.maxlength.requiredLength }} characters!</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="margin-top">
                <file-upload [uploadText]="'Upload Course Image'" (onFileUpload)="onFileUpload($event)"></file-upload>
            </div>
            <button type="submit" class="button button--large button--create margin-top" [disabled]="createCourseForm.invalid && ngForm.submitted">Create Course</button>
        </form>
    </div>
</div>